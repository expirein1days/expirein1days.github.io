(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1207:function(t,e,a){"use strict";(function(t){a.d(e,"a",function(){return u});var n=a(12),i=a.n(n),r=a(14),o=a(0),s=a.n(o),c=a(19),d=a(1208),_=a(1214),p=a(11);function u(e){var a=e.children,n=Object(o.useContext)(c.a).setPictureData;function u(){return(u=Object(r.a)(i.a.mark(function t(e){var a,r,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.target.files[0])){t.next=17;break}return t.t0="data:".concat(a.type,";base64,"),t.next=5,Object(_.a)(a);case 5:return t.t1=t.sent,r=t.t0+t.t1,t.prev=7,t.next=10,Object(d.a)(r,a.type);case 10:o=t.sent,n({uri:URL.createObjectURL(o)}),Object(p.a)("navigateTo",{to:"/make/picture"}),t.next=17;break;case 15:t.prev=15,t.t2=t.catch(7);case 17:case"end":return t.stop()}},t,this,[[7,15]])}))).apply(this,arguments)}return s.a.createElement(s.a.Fragment,null,a,!t.ReactNativeWebView&&s.a.createElement("input",{type:"file",onChange:function(t){return u.apply(this,arguments)},alt:"pick image",style:{position:"absolute",top:0}}))}}).call(this,a(46))},1208:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var n=a(1209),i=a.n(n);function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";return new Promise(function(a){i()(t,function(t){t.toBlob(function(t){a(t)},e)},{orientation:!0})})}},1214:function(t,e,a){"use strict";function n(t){return new Promise(function(e,a){var n=new FileReader;n.onload=function(){var t=n.result.split(",")[1];e(t)},n.readAsDataURL(t)})}a.d(e,"a",function(){return n})},1216:function(t,e,a){var n={"./paint_text_normal_en_android.svg":478,"./paint_text_normal_en_ios.svg":479,"./paint_text_normal_ja_android.svg":480,"./paint_text_normal_ja_ios.svg":481,"./paint_text_pressed_en_android.svg":482,"./paint_text_pressed_en_ios.svg":483,"./paint_text_pressed_ja_android.svg":484,"./paint_text_pressed_ja_ios.svg":485,"./photo_text_normal_en_android.svg":486,"./photo_text_normal_en_ios.svg":487,"./photo_text_normal_ja_android.svg":488,"./photo_text_normal_ja_ios.svg":489,"./photo_text_pressed_en_android.svg":490,"./photo_text_pressed_en_ios.svg":491,"./photo_text_pressed_ja_android.svg":492,"./photo_text_pressed_ja_ios.svg":493,"./stamp_text_normal_en_android.svg":494,"./stamp_text_normal_en_ios.svg":495,"./stamp_text_normal_ja_android.svg":496,"./stamp_text_normal_ja_ios.svg":497,"./stamp_text_pressed_en_android.svg":498,"./stamp_text_pressed_en_ios.svg":499,"./stamp_text_pressed_ja_android.svg":500,"./stamp_text_pressed_ja_ios.svg":501,"./text_text_normal_en_android.svg":502,"./text_text_normal_en_ios.svg":503,"./text_text_normal_ja_android.svg":504,"./text_text_normal_ja_ios.svg":505,"./text_text_pressed_en_android.svg":506,"./text_text_pressed_en_ios.svg":507,"./text_text_pressed_ja_android.svg":508,"./text_text_pressed_ja_ios.svg":509};function i(t){var e=r(t);return a(e)}function r(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id=1216},1782:function(t,e,a){"use strict";a.r(e);var n=a(12),i=a.n(n),r=a(14),o=a(9),s=a(0),c=a.n(s),d=a(19),_=a(11),p=a(100),u=a(150),x=a(144),m=a(1207),g=a(47),l=a(16),f=a(20);function v(t){var e=t.cardStyle,a=t.type,n="ja"===Object(s.useContext)(f.a).current?"NotoSansCJKjp-Bold":void 0;return c.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:e.cardWidth,height:e.cardCoverHeight,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.8)",boxSizing:"border-box"}},c.a.createElement("div",{style:{}},c.a.createElement(l.a,{is:"div",style:{padding:5,height:32,lineHeight:"16px",textAlign:"center",fontFamily:n,overhidden:"visible",fontSize:11,color:"#1b1b1b"},code:"make.home.mask.".concat(a,".title")})))}var h=a(1053),b=a.n(h);function y(t){var e=t.name,n=t.width,i=t.height,r=t.active,o=Object(s.useContext)(f.a);var d=n/170*55;return c.a.createElement("div",{style:{backgroundColor:r?"rgb(245,245,245)":"#fff",boxSizing:"border-box",paddingTop:(i-d)/2,width:n,height:i}},c.a.createElement("div",{style:{width:n,height:d,overflow:"visible"}},c.a.createElement("img",{src:function(){var t="iOS"===(new b.a).getOS().name?"ios":"android";return a(1216)("./".concat(e,"_text_").concat(r?"pressed":"normal","_").concat(o.current,"_").concat(t,".svg"))}(),style:{width:n},alt:"".concat(e," footer")})))}function j(t,e){var a=null,n=null;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var s=a;a=Date.now(),s&&a-s<=e&&clearTimeout(n),n=setTimeout(function(){return t.apply(void 0,r)},e)}}function w(t){var e=Object(s.useContext)(d.a),a=e.setLayers,n=e.newLayer,i=e.previousPage,r=n?[{}]:e.layers,p=Object(s.useState)(!1),u=Object(o.a)(p,2),x=u[0],m=u[1],l=t.cardStyle,f=t.type,h=!1,b=!0,w=!1,O=void 0;try{for(var E,k=r[Symbol.iterator]();!(b=(E=k.next()).done);b=!0){var S=E.value;S.stampRule&&"NG"===S.stampRule.stampFlag["flag_layer_".concat(f)]&&(h=!0)}}catch(C){w=!0,O=C}finally{try{b||null==k.return||k.return()}finally{if(w)throw O}}function P(){if(!h){if(r[r.length-1].type=f,a(r),t.goPage)return t.goPage();Object(_.a)("navigateTo",{routeName:n?"MakePage":void 0,to:"/make/".concat(f),params:{previousPage:i}})}}Object(s.useEffect)(function(){Object(g.a)()},[]);var T=c.a.createElement("div",{style:{width:l.cardWidth,height:l.cardHeight,overflow:"hidden"}},c.a.createElement("div",{style:{width:l.cardWidth,height:l.cardCoverHeight,overflow:"hidden"}},c.a.createElement("img",{src:t.cover,alt:"".concat(f," cover not loaded"),style:{display:"block",height:l.cardCoverHeight,width:l.cardWidth}})),c.a.createElement(y,{name:f,type:"B"===l.designType?"large":"normal",width:l.cardWidth,height:l.cardFooterHeight,active:x}));return c.a.createElement("div",{onTouchStart:function(){return m(!0)},onTouchEnd:j(function(){return m(!1)},"photo"===f?100:300),style:{position:"relative",width:l.cardWidth,height:l.cardHeight,marginRight:["photo","paint"].includes(f)?11:0,marginBottom:["photo","text"].includes(f)?12:0},onClick:function(){return Object(g.b)(P)}},t.wrapper?c.a.createElement(t.wrapper,null,T):T,h&&c.a.createElement(v,{cardStyle:l,layers:r,type:f}))}a.d(e,"default",function(){return E});var O=44;function E(t){var e=Object(s.useContext)(d.a),n=Object(p.a)(),g=Object(o.a)(n,2),l=g[0],f=g[1],v=Object(s.useState)(!1),h=Object(o.a)(v,2),b=h[0],y=h[1],j=(e.newLayer?[{}]:e.layers).length>1,E=function(){var t=f-(j?O:0),e=l/t,a=e>.59?"A":"B",n=(l-35)/2,i=(t-12)/2,r=n/("A"===a?1:170/204);return{screenRatio:e,designType:a,cardWidth:n,cardHeight:i,cardCoverHeight:r,cardFooterHeight:i-r}}();function k(){return(k=Object(r.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(_.a)("pickImage");case 3:if(t.sent.cancel){t.next=7;break}return t.next=7,Object(_.a)("navigateTo",{routeName:e.newLayer?"MakePage":void 0,to:"/make/picture",params:{previousPage:e.previousPage}});case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}},t,this,[[0,9]])}))).apply(this,arguments)}return c.a.createElement(c.a.Fragment,null,j&&c.a.createElement(x.a,{isBorder:j,currentPage:"home",revoke:function(){y(!0)}}),c.a.createElement("div",{style:{backgroundColor:"rgb(244,244,244)",display:"flex",flexWrap:"wrap",paddingLeft:12,paddingRight:12}},c.a.createElement(w,{cardStyle:E,goPage:function(){return k.apply(this,arguments)},wrapper:m.a,cover:a("B"===E.designType?969:970),type:"photo"}),c.a.createElement(w,{cardStyle:E,cover:a("B"===E.designType?971:972),type:"text"}),c.a.createElement(w,{cardStyle:E,cover:a("B"===E.designType?973:974),type:"paint"}),c.a.createElement(w,{cardStyle:E,cover:a("B"===E.designType?975:976),type:"stamp"})),c.a.createElement(u.a,{status:b,isAgainFu:function(t){y(!1)}}))}},478:function(t,e,a){t.exports=a.p+"static/media/paint_text_normal_en_android.a885c48a.svg"},479:function(t,e,a){t.exports=a.p+"static/media/paint_text_normal_en_ios.650059e1.svg"},480:function(t,e,a){t.exports=a.p+"static/media/paint_text_normal_ja_android.27baecd7.svg"},481:function(t,e,a){t.exports=a.p+"static/media/paint_text_normal_ja_ios.eab374bc.svg"},482:function(t,e,a){t.exports=a.p+"static/media/paint_text_pressed_en_android.efe4ec6f.svg"},483:function(t,e,a){t.exports=a.p+"static/media/paint_text_pressed_en_ios.a66a4505.svg"},484:function(t,e,a){t.exports=a.p+"static/media/paint_text_pressed_ja_android.6f130906.svg"},485:function(t,e,a){t.exports=a.p+"static/media/paint_text_pressed_ja_ios.5c1746b9.svg"},486:function(t,e,a){t.exports=a.p+"static/media/photo_text_normal_en_android.d0f91309.svg"},487:function(t,e,a){t.exports=a.p+"static/media/photo_text_normal_en_ios.76ea3634.svg"},488:function(t,e,a){t.exports=a.p+"static/media/photo_text_normal_ja_android.f7c06dc4.svg"},489:function(t,e,a){t.exports=a.p+"static/media/photo_text_normal_ja_ios.0fa6315c.svg"},490:function(t,e,a){t.exports=a.p+"static/media/photo_text_pressed_en_android.1421d43f.svg"},491:function(t,e,a){t.exports=a.p+"static/media/photo_text_pressed_en_ios.8f2bdf14.svg"},492:function(t,e,a){t.exports=a.p+"static/media/photo_text_pressed_ja_android.8d77c836.svg"},493:function(t,e,a){t.exports=a.p+"static/media/photo_text_pressed_ja_ios.7b54efae.svg"},494:function(t,e,a){t.exports=a.p+"static/media/stamp_text_normal_en_android.88a50dc1.svg"},495:function(t,e,a){t.exports=a.p+"static/media/stamp_text_normal_en_ios.d8ca7ded.svg"},496:function(t,e,a){t.exports=a.p+"static/media/stamp_text_normal_ja_android.ff80f26d.svg"},497:function(t,e,a){t.exports=a.p+"static/media/stamp_text_normal_ja_ios.435d2f11.svg"},498:function(t,e,a){t.exports=a.p+"static/media/stamp_text_pressed_en_android.fb81214a.svg"},499:function(t,e,a){t.exports=a.p+"static/media/stamp_text_pressed_en_ios.97e7e9e8.svg"},500:function(t,e,a){t.exports=a.p+"static/media/stamp_text_pressed_ja_android.897200e3.svg"},501:function(t,e,a){t.exports=a.p+"static/media/stamp_text_pressed_ja_ios.491bfb78.svg"},502:function(t,e,a){t.exports=a.p+"static/media/text_text_normal_en_android.53323134.svg"},503:function(t,e,a){t.exports=a.p+"static/media/text_text_normal_en_ios.916e0755.svg"},504:function(t,e,a){t.exports=a.p+"static/media/text_text_normal_ja_android.49aee93d.svg"},505:function(t,e,a){t.exports=a.p+"static/media/text_text_normal_ja_ios.20f1b683.svg"},506:function(t,e,a){t.exports=a.p+"static/media/text_text_pressed_en_android.9fa4f7df.svg"},507:function(t,e,a){t.exports=a.p+"static/media/text_text_pressed_en_ios.071131d3.svg"},508:function(t,e,a){t.exports=a.p+"static/media/text_text_pressed_ja_android.fcf57f76.svg"},509:function(t,e,a){t.exports=a.p+"static/media/text_text_pressed_ja_ios.16ed03fc.svg"},969:function(t,e,a){t.exports=a.p+"static/media/Picture_image@2x.170x204.a42897d7.png"},970:function(t,e,a){t.exports=a.p+"static/media/Picture_image@2x.7064ff90.png"},971:function(t,e,a){t.exports=a.p+"static/media/Text_image@2x.170x204.9b8c820e.png"},972:function(t,e,a){t.exports=a.p+"static/media/Text_image@2x.ddb898d6.png"},973:function(t,e,a){t.exports=a.p+"static/media/Paint_image@2x.170x204.fb42de96.png"},974:function(t,e,a){t.exports=a.p+"static/media/Paint_image@2x.e6228a7b.png"},975:function(t,e,a){t.exports=a.p+"static/media/Stamp_image@2x.170x204.4c0b8b9d.png"},976:function(t,e,a){t.exports=a.p+"static/media/Stamp_image@2x.cca52b89.png"}}]);
//# sourceMappingURL=11.f617de3b.chunk.js.map