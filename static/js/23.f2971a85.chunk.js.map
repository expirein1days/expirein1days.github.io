{"version":3,"sources":["routes/picture/FilterPicker.js","routes/picture/InterceptionBox.js","routes/picture/showSvg.js","routes/picture/algorithm.js","routes/picture/index.js","components/GoToNext.js"],"names":["FilterButton","props","languageType","useContext","LocaleContext","fileterCan","useRef","filterType","type","onClick","active","extraProps","Object","objectWithoutProperties","canvasId","concat","applyFilter","canvas","obj","filter","index","arguments","length","undefined","filters","applyFilters","renderAll","useEffect","pictureData","f","fabric","Image","current","Canvas","enableRetinaScaling","fromURL","smallUri","uri","img","height","width","scaleToWidth","set","left","top","setCoords","scaleToHeight","rect","Rect","fill","lockMovementX","lockMovementY","lockScalingX","lockScalingY","lockRotation","lockSkewingX","lockScalingFlip","lockSkewingY","lockUniScaling","hasBorders","hasControls","hasRotatingPoint","clipPath","add","Contrast","contrast","BlackWhite","Grayscale","ColorMatrix","matrix","react_default","a","createElement","assign","style","size","borderWidth","borderStyle","borderColor","padding","backgroundColor","overflow","ref","id","lineHeight","fontFamily","fontWeight","fontSize","color","textAlign","label","FilterPicker","_useState","useState","_useState2","slicedToArray","selectedFilterType","setSelectedFilterType","_useState3","_useState4","popupVisible","setPopupVisible","local","createClickHandler","closePopup","onChange","Popup","renderOverlay","overlayProps","triggerRect","visible","window","innerHeight","position","innerWidth","bottom","zIndex","viewBox","d","boxShadow","Locale","code","display","justifyContent","marginBottom","borderRadius","src","require","alt","InterceptionBox","collect","srcUrl","svg1","srcUrlOff","off_svg1","svg2","off_svg2","svg3","off_svg3","svg4","off_svg4","svg5","off_svg5","svg6","off_svg6","svg7","off_svg7","svg8","off_svg8","svg9","off_svg9","svg10","off_svg10","svg11","off_svg11","svg12","off_svg12","svg13","off_svg13","svg14","off_svg14","svg15","off_svg15","svg16","off_svg16","svg17","off_svg17","svg18","off_svg18","svg19","off_svg19","svg20","off_svg20","svg21","off_svg21","svg22","off_svg22","svg23","off_svg23","svg24","off_svg24","svg25","off_svg25","svg26","off_svg26","svg27","off_svg27","svg28","off_svg28","svg29","off_svg29","svg30","off_svg30","svg31","off_svg31","svg32","off_svg32","_useState5","_useState6","modelType","setModelType","_useState7","_useState8","arryList","setArryList","_useState9","_useState10","firstCall","setFirstCall","iconClick","e","onSelectShape","i","Fragment","className","map","v","k","key","selectId","selectBox","marginLeft","marginTop","InterceptionIcon","ArryShowList","srcUrlFill","fill_svg1","fill_svg2","fill_svg3","fill_svg4","fill_svg5","fill_svg6","fill_svg7","fill_svg8","fill_svg9","fill_svg10","fill_svg11","fill_svg12","fill_svg13","fill_svg14","fill_svg15","fill_svg16","fill_svg17","fill_svg18","fill_svg19","fill_svg20","fill_svg21","fill_svg22","fill_svg23","fill_svg24","fill_svg25","fill_svg26","fill_svg27","fill_svg28","fill_svg29","fill_svg30","fill_svg31","fill_svg32","shapsPositionConversion","res","integrationTop","integrationLeft","scaleType","scaleNumber","bigMultiples","imgObjLeft","imgObjTop","imgTop","shapId","imgObj","canvasSize","canvasArea","areaStyle","integrationHeight","integrationWidth","whiteBorderPosition","fangzhi","whiteBorderUrl","fillUrl","itemSwitchId","oldSvgUrl","delay","delayType","lastTop","lastLeft","injectImages","make","MakeContext","layers","previousPage","item","ItemContext","setCanvas","showTypeset","setShowTypeset","imageSize","svgUrls","alertModelVisible","setAlertModelVisible","_useState11","_useState12","_useState13","_useState14","_useState15","_useState16","_useState17","_useState18","isAgainEdit","setIsAgainEdit","_useState19","_useState20","setImgObj","canvasRef","getObjects","hideTypesetFu","InitializationThrottle","setTimeout","setZoom","parseInt","handleShapeChange","document","getElementsByClassName","onclick","handleSelectShape","useCallback","asyncToGenerator","regenerator_default","mark","_callee","_len","args","_key","_args","wrap","_context","prev","next","Array","Loading","instruction","checkGlobalInstruction","constants","Picture_Resize_Instruction","sent","setGlobalInstructionVisited","t0","Promise","resolve","reject","then","apply","abrupt","stop","this","_x","_x2","_x3","_x4","_x5","_x6","_x7","_handleShapeChange","_callee2","is","cs","as","url","imageObjs","_context2","setWidth","setHeight","fixFabricSize","remove","pop","controlsAboveOverlay","loadSVGFromURL","objects","options","util","groupSVGElements","opt","angle","scale","resItemTop","resItemLeft","_objects","fillOpacity","_toJSON","_callee3","htm","temporaryCanvas","ctx","imageData","_imageData","_imageData2","_imageData3","toDataurl","_context3","getElementById","getContext","getImageData","putImageData","toDataURL","imageTools","storeImageData","imageName","invoke","to","params","itemModal","handleMouseDown","preventDefault","screenshotsImg","whiteBorder","handleMouseUp","handleTouchcancel","console","log","can","upperCanvasEl","addEventListener","removeEventListener","dispose","right","navbar","page","revoke","GoToNext","toJSON","clearTimeout","ViewPort","topLayer","data","mixData","noMultiply","pointerEvents","TypesetPrompt","moveIcon","resizeIcon","title","hideTypesetProps","toolbar","clearFilter","picture_InterceptionBox","Enlarge","components_isAgainEdit","status","isAgainFu","AlertModal","description","text","disabled","react__WEBPACK_IMPORTED_MODULE_1___default","throttle","GotoMixIconDis","GotoMixIcon","_Users_09013730_git_hand_utme_make_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","transition"],"mappings":"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","file":"static/js/23.f2971a85.chunk.js","sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react'\nimport Popup from '../../components/Popup'\nimport { fabric } from '../../utils/fabric'\nimport Locale from '../../components/Locale'\nimport { LocaleContext } from '../../contexts/LocaleContext'\nfunction FilterButton (props) {\n  const languageType = useContext(LocaleContext)\n  const fileterCan = useRef(null)\n  const { type: filterType, onClick, active, ...extraProps } = props\n  let size = 90\n  const canvasId = `fillterPickerItem${filterType}`\n\n  function applyFilter (canvas, obj, filter, index = 0) {\n    if (!obj) return\n    obj.filters[index] = filter\n    obj.applyFilters()\n    canvas.renderAll()\n  }\n\n  useEffect(() => {\n    if (props.pictureData) {\n      let f = fabric.Image.filters\n      if (fileterCan.current) {\n        let canvas = new fabric.Canvas(fileterCan.current, { enableRetinaScaling: false })\n        fabric.Image.fromURL(props.pictureData.smallUri || props.pictureData.uri, function (img) {\n          if (img.height >= img.width) {\n            img.scaleToWidth(size)\n            img.set({\n              left: 0,\n              top: -(((img.height * (size / img.width)) - size) / 2)\n            }).setCoords()\n          } else {\n            img.scaleToHeight(size)\n            img.set({\n              left: -(((img.width * (size / img.height)) - size) / 2),\n              top: 0\n            }).setCoords()\n          }\n          var rect = new fabric.Rect({\n            width: size,\n            height: size,\n            fill: 'red',\n            lockMovementX: true,\n            lockMovementY: true,\n            lockScalingX: true,\n            lockScalingY: true,\n            lockRotation: true,\n            lockSkewingX: true,\n            lockScalingFlip: true,\n            lockSkewingY: true,\n            lockUniScaling: true,\n            hasBorders: false,\n            hasControls: false,\n            hasRotatingPoint: false\n          })\n          canvas.clipPath = rect\n          canvas.add(img)\n          canvas.renderAll()\n          if (filterType === 'original') {\n          } else if (filterType === 'high_contrast') {\n            applyFilter(canvas, img, new f.Contrast({\n              contrast: 1\n            }))\n            applyFilter(canvas, img, new f.BlackWhite())\n          } else if (filterType === 'monochrome') {\n            applyFilter(canvas, img, new f.Grayscale())\n          } else if (filterType === 'fade') {\n            applyFilter(canvas, img, new f.ColorMatrix({\n              matrix: [\n                0.69289941361155, 0.7278445092038974, -0.05512249038767107, 0, 0,\n                0.1613074605810542, 1.0992559191682274, 0.13496294539414613, 0, 0,\n                0.3215407473339169, 0.5219370160799921, 0.475247644029788, 0, 0,\n                0, 0, 0, 1, 0\n              ]\n            }))\n          } else if (filterType === 'process') {\n            applyFilter(canvas, img, new f.ColorMatrix({\n              matrix: [\n                0.9923434290993866, 0.020245983284966663, 0.05808604318498348, 0, 0,\n                0.12115038437773568, 0.835385137906068, 0.05372603236979564, 0, 0,\n                0.19202559992747836, 0.21537620720368716, 0.9342355235475182, 0, 0,\n                0, 0, 0, 1, 0\n              ]\n            }))\n          } else if (filterType === 'chrome') {\n            applyFilter(canvas, img, new f.ColorMatrix({\n              matrix: [\n                1.6625074707000003, -0.12036142800000012, -0.012146042700000012, 0, 0,\n                -0.035792529300000035, 1.5779385719999999, -0.012146042700000012, 0, 0,\n                -0.035792529300000035, -0.12036142800000012, 1.6861539573000002, 0, 0,\n                0, 0, 0, 1, 0\n              ]\n            }))\n          }\n        }, {\n          hasControls: false,\n          lockMovementX: true,\n          lockMovementY: true\n        })\n      }\n    }\n  }, [props.pictureData, fileterCan])\n\n  return (\n    <div\n      onClick={() => {\n        onClick()\n      }}\n      style={{\n        // width: size,\n        height: size + 30\n      }}\n      {...extraProps}\n    >\n      <div style={{\n        borderWidth: 2,\n        borderStyle: 'solid',\n        borderColor: active ? '#1b1b1b' : 'transparent',\n        padding: 2\n      }}>\n        <div style={{\n          width: size,\n          height: size,\n          backgroundColor: '#FFF',\n          // border: '1px solid #ddd'\n          overflow: 'hidden'\n        }} >\n          <canvas ref={fileterCan} id={canvasId} width={size} />\n        </div>\n      </div>\n      <div style={{\n        height: 17,\n        lineHeight: '26px',\n        fontFamily: languageType.current === 'ja' ? 'NotoSansCJKjp-Bold' : 'initial',\n        fontWeight: languageType.current === 'ja' ? 'initial' : 'bold',\n        fontSize: 11,\n        color: '#7D7D7D',\n        textAlign: 'center'\n      }}>{props.label}</div>\n    </div>\n  )\n}\n\nexport default function FilterPicker (props) {\n  const [selectedFilterType, setSelectedFilterType] = useState('original')\n  const [popupVisible, setPopupVisible] = useState(false)\n  const local = useContext(LocaleContext)\n\n  function createClickHandler (type, closePopup) {\n    return function clickHandler () {\n      props.onChange(type)\n      setSelectedFilterType(type)\n      closePopup()\n      // const FiltersIcons = document.getElementById('FiltersIcons')\n      // FiltersIcons.style.zIndex = 11\n    }\n  }\n\n  return (\n    <Popup\n      renderOverlay={(overlayProps) => {\n        const { triggerRect, closePopup, visible } = overlayProps\n        setPopupVisible(visible)\n        if (!triggerRect) return <div />\n        let bottom = window.innerHeight - triggerRect.top + 10\n        return (\n          <div style={{ position: 'absolute', backgroundColor: '#FFF', width: window.innerWidth, bottom: 102, zIndex: 12, height: 364 }}>\n            {/* 三角形 */}\n            {/* <div style={{ position: 'absolute', bottom: -23, left: 25 }}>\n              <svg width='30' height='20' viewBox='0 0 30 30'>\n                <path\n                  fill='#fff'\n                  d='M30 0 L15 15 L 0 0 z'\n                />\n              </svg>\n            </div> */}\n            {/* 三角形 */}\n            <div style={{ position: 'absolute', bottom: -26, left: 27 }}>\n              <svg width='30' height='24' viewBox='0 0 30 24'>\n                <path\n                  fill='#fff'\n                  d='M30 0 L15 20 L 0 0 z'\n                />\n              </svg>\n            </div>\n            <div style={{\n              fontSize: local.current === 'ja' ? '17px' : '20px',\n              color: '#1B1B1B',\n              lineHeight: '56px',\n              fontFamily: local.current === 'ja' ? 'NotoSansCJKjp-Bold' : 'initial',\n              height: 56,\n              boxShadow: 'inset 0 -1px 0 0 #DADADA',\n              textAlign: 'center',\n              fontWeight: local.current === 'ja' ? 'initial' : 'bold'\n            }}>\n              <Locale code='make.picture.filterPickerTitle' />\n            </div>\n            <div style={{ padding: 22 }}>\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 20 }}>\n                <FilterButton\n                  pictureData={props.pictureData}\n                  active={selectedFilterType === 'original'}\n                  onClick={createClickHandler('original', closePopup)} type='original' label={local.current === 'ja' ? '調整なし' : 'None'} />\n                <FilterButton\n                  pictureData={props.pictureData}\n                  active={selectedFilterType === 'monochrome'}\n                  onClick={createClickHandler('monochrome', closePopup)} type='monochrome' label={local.current === 'ja' ? 'モノクロ' : 'Monochrome'} />\n                <FilterButton\n                  pictureData={props.pictureData}\n                  active={selectedFilterType === 'high_contrast'}\n                  onClick={createClickHandler('high_contrast', closePopup)} type='high_contrast' label={local.current === 'ja' ? 'ハイコントラスト' : 'High Contrast'} />\n              </div>\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                <FilterButton\n                  pictureData={props.pictureData}\n                  active={selectedFilterType === 'process'}\n                  onClick={createClickHandler('process', closePopup)} type='process' label={local.current === 'ja' ? 'プロセス' : 'Process'} />\n                <FilterButton\n                  pictureData={props.pictureData}\n                  active={selectedFilterType === 'fade'}\n                  onClick={createClickHandler('fade', closePopup)} type='fade' label={local.current === 'ja' ? 'フェード' : 'Fade'} />\n                <FilterButton\n                  pictureData={props.pictureData}\n                  active={selectedFilterType === 'chrome'}\n                  onClick={createClickHandler('chrome', closePopup)} type='chrome' label={local.current === 'ja' ? 'クローム' : 'Chrome'} />\n              </div>\n            </div>\n          </div>\n        )\n      }}\n    >\n      <div\n        id='FiltersIcons'\n        style={{\n          borderRadius: 25,\n          width: 50,\n          // marginLeft: 16,\n          // marginBottom: 16,\n          // textAlign: 'center',\n          height: 50,\n          // display: 'flex',\n          // justifyContent: 'center',\n          // alignItems: 'center',\n          zIndex: popupVisible ? 13 : 11,\n          position: 'absolute'\n        }}\n      >\n        <span>\n          <img\n            src={require('../../assets/Circle_Ic_Filter@3x.png')}\n            alt=''\n            style={{\n              width: '100%',\n              height: '100%'\n            }}\n          />\n        </span>\n      </div>\n    </Popup>\n  )\n}\n","import React, { useContext, useEffect, useState } from 'react'\nimport './InterceptionBox.css'\nimport InterceptionIcon from '../../assets/Circle_Ic_Shape@3x.png'\n// import Arrylist from './svgs'\nimport Locale from '../../components/Locale'\nimport { LocaleContext } from '../../contexts/LocaleContext'\n/**\n * 选中状态svg引入\n */\nimport svg1 from '../../assets/Shape/Shape_Rectangle.svg'\nimport svg2 from '../../assets/Shape/Shape_Square.svg'\nimport svg3 from '../../assets/Shape/Shape_Rounded.svg'\nimport svg4 from '../../assets/Shape/Shape_Circle.svg'\nimport svg5 from '../../assets/Shape/Shape_Flower_1.svg'\nimport svg6 from '../../assets/Shape/Shape_Flower_2.svg'\nimport svg7 from '../../assets/Shape/Shape_Flower_3.svg'\nimport svg8 from '../../assets/Shape/Shape_Flower_4.svg'\nimport svg9 from '../../assets/Shape/Shape_Rhombus.svg'\nimport svg10 from '../../assets/Shape/Shape_Hexagon.svg'\nimport svg11 from '../../assets/Shape/Shape_Heart.svg'\nimport svg12 from '../../assets/Shape/Shape_Star.svg'\nimport svg13 from '../../assets/Shape/Shape_Triangle_1.svg'\nimport svg14 from '../../assets/Shape/Shape_Triangle_2.svg'\nimport svg15 from '../../assets/Shape/Shape_Triangle_3.svg'\nimport svg16 from '../../assets/Shape/Shape_Triangle_4.svg'\nimport svg17 from '../../assets/Shape/Shape_Right_triangle_1.svg'\nimport svg18 from '../../assets/Shape/Shape_Right_triangle_2.svg'\nimport svg19 from '../../assets/Shape/Shape_Right_triangle_3.svg'\nimport svg20 from '../../assets/Shape/Shape_Right_triangle_4.svg'\nimport svg21 from '../../assets/Shape/Shape_Quarter_circle_1.svg'\nimport svg22 from '../../assets/Shape/Shape_Quarter_circle_2.svg'\nimport svg23 from '../../assets/Shape/Shape_Quarter_circle_3.svg'\nimport svg24 from '../../assets/Shape/Shape_Quarter_circle_4.svg'\nimport svg25 from '../../assets/Shape/Shape_Parallelogram_1.svg'\nimport svg26 from '../../assets/Shape/Shape_Parallelogram_2.svg'\nimport svg27 from '../../assets/Shape/Shape_Parallelogram_3.svg'\nimport svg28 from '../../assets/Shape/Shape_Parallelogram_4.svg'\nimport svg29 from '../../assets/Shape/Shape_Zebra_crossing_1.svg'\nimport svg30 from '../../assets/Shape/Shape_Zebra_crossing_2.svg'\nimport svg31 from '../../assets/Shape/Shape_Zebra_crossing_3.svg'\nimport svg32 from '../../assets/Shape/Shape_Zebra_crossing_4.svg'\n/**\n * 未选中状态svg引入\n */\n\nimport off_svg1 from '../../assets/shape-normals/Shape_Rectangle_normal.svg'\nimport off_svg2 from '../../assets/shape-normals/Shape_Square_normal.svg'\nimport off_svg3 from '../../assets/shape-normals/Shape_Rounded_normal.svg'\nimport off_svg4 from '../../assets/shape-normals/Shape_Circle_normal.svg'\nimport off_svg5 from '../../assets/shape-normals/Shape_Flower_normal_1.svg'\nimport off_svg6 from '../../assets/shape-normals/Shape_Flower_normal_2.svg'\nimport off_svg7 from '../../assets/shape-normals/Shape_Flower_normal_3.svg'\nimport off_svg8 from '../../assets/shape-normals/Shape_Flower_normal_4.svg'\nimport off_svg9 from '../../assets/shape-normals/Shape_Rhombus_normal.svg'\nimport off_svg10 from '../../assets/shape-normals/Shape_Hexagon_normal.svg'\nimport off_svg11 from '../../assets/shape-normals/Shape_Heart_normal.svg'\nimport off_svg12 from '../../assets/shape-normals/Shape_Star_normal.svg'\nimport off_svg13 from '../../assets/shape-normals/Shape_Triangle_normal_1.svg'\nimport off_svg14 from '../../assets/shape-normals/Shape_Triangle_normal_2.svg'\nimport off_svg15 from '../../assets/shape-normals/Shape_Triangle_normal_3.svg'\nimport off_svg16 from '../../assets/shape-normals/Shape_Triangle_normal_4.svg'\nimport off_svg17 from '../../assets/shape-normals/Shape_Right_triangle_normal_1.svg'\nimport off_svg18 from '../../assets/shape-normals/Shape_Right_triangle_normal_2.svg'\nimport off_svg19 from '../../assets/shape-normals/Shape_Right_triangle_normal_3.svg'\nimport off_svg20 from '../../assets/shape-normals/Shape_Right_triangle_normal_4.svg'\nimport off_svg21 from '../../assets/shape-normals/Shape_Quarter_circle_normal_1.svg'\nimport off_svg22 from '../../assets/shape-normals/Shape_Quarter_circle_normal_2.svg'\nimport off_svg23 from '../../assets/shape-normals/Shape_Quarter_circle_normal_3.svg'\nimport off_svg24 from '../../assets/shape-normals/Shape_Quarter_circle_normal_4.svg'\nimport off_svg25 from '../../assets/shape-normals/Shape_Parallelogram_normal_1.svg'\nimport off_svg26 from '../../assets/shape-normals/Shape_Parallelogram_normal_2.svg'\nimport off_svg27 from '../../assets/shape-normals/Shape_Parallelogram_normal_3.svg'\nimport off_svg28 from '../../assets/shape-normals/Shape_Parallelogram_normal_4.svg'\nimport off_svg29 from '../../assets/shape-normals/Shape_Zebra_crossing_normal_1.svg'\nimport off_svg30 from '../../assets/shape-normals/Shape_Zebra_crossing_normal_2.svg'\nimport off_svg31 from '../../assets/shape-normals/Shape_Zebra_crossing_normal_3.svg'\nimport off_svg32 from '../../assets/shape-normals/Shape_Zebra_crossing_normal_4.svg'\n\nfunction InterceptionBox (props) {\n  var collect = [\n    { id: 1, srcUrl: svg1, srcUrlOff: off_svg1, type: true },\n    { id: 2, srcUrl: svg2, srcUrlOff: off_svg2, type: false },\n    { id: 3, srcUrl: svg3, srcUrlOff: off_svg3, type: false },\n    { id: 4, srcUrl: svg4, srcUrlOff: off_svg4, type: false },\n    { id: 5, srcUrl: svg5, srcUrlOff: off_svg5, type: false },\n    { id: 6, srcUrl: svg6, srcUrlOff: off_svg6, type: false },\n    { id: 7, srcUrl: svg7, srcUrlOff: off_svg7, type: false },\n    { id: 8, srcUrl: svg8, srcUrlOff: off_svg8, type: false },\n    { id: 9, srcUrl: svg9, srcUrlOff: off_svg9, type: false },\n    { id: 10, srcUrl: svg10, srcUrlOff: off_svg10, type: false },\n    { id: 11, srcUrl: svg11, srcUrlOff: off_svg11, type: false },\n    { id: 12, srcUrl: svg12, srcUrlOff: off_svg12, type: false },\n    { id: 13, srcUrl: svg13, srcUrlOff: off_svg13, type: false },\n    { id: 14, srcUrl: svg14, srcUrlOff: off_svg14, type: false },\n    { id: 15, srcUrl: svg15, srcUrlOff: off_svg15, type: false },\n    { id: 16, srcUrl: svg16, srcUrlOff: off_svg16, type: false },\n    { id: 17, srcUrl: svg17, srcUrlOff: off_svg17, type: false },\n    { id: 18, srcUrl: svg18, srcUrlOff: off_svg18, type: false },\n    { id: 19, srcUrl: svg19, srcUrlOff: off_svg19, type: false },\n    { id: 20, srcUrl: svg20, srcUrlOff: off_svg20, type: false },\n    { id: 21, srcUrl: svg21, srcUrlOff: off_svg21, type: false },\n    { id: 22, srcUrl: svg22, srcUrlOff: off_svg22, type: false },\n    { id: 23, srcUrl: svg23, srcUrlOff: off_svg23, type: false },\n    { id: 24, srcUrl: svg24, srcUrlOff: off_svg24, type: false },\n    { id: 25, srcUrl: svg25, srcUrlOff: off_svg25, type: false },\n    { id: 26, srcUrl: svg26, srcUrlOff: off_svg26, type: false },\n    { id: 27, srcUrl: svg27, srcUrlOff: off_svg27, type: false },\n    { id: 28, srcUrl: svg28, srcUrlOff: off_svg28, type: false },\n    { id: 29, srcUrl: svg29, srcUrlOff: off_svg29, type: false },\n    { id: 30, srcUrl: svg30, srcUrlOff: off_svg30, type: false },\n    { id: 31, srcUrl: svg31, srcUrlOff: off_svg31, type: false },\n    { id: 32, srcUrl: svg32, srcUrlOff: off_svg32, type: false }\n  ]\n  const [width] = useState(window.innerWidth)\n  const [height] = useState(window.innerHeight)\n  const [modelType, setModelType] = useState(true)\n  const [arryList, setArryList] = useState(collect)\n  const [firstCall, setFirstCall] = useState(true)\n  const local = useContext(LocaleContext)\n\n  useEffect(() => {\n    for (let i = 0; i < arryList.length; i++) {\n      if (arryList[i].id === 1) {\n        arryList[i].type = true\n      } else {\n        arryList[i].type = false\n      }\n    }\n  }, [])\n  function iconClick (e) {\n    const { onSelectShape } = props\n    setModelType(!modelType)\n    if (onSelectShape) {\n      if (firstCall) {\n        if (e !== 'box') {\n          onSelectShape(arryList[0].id, arryList[0].srcUrl, 'change\bShape')\n        }\n        setFirstCall(false)\n      }\n    }\n  }\n  function selectBox (e) {\n    const { onSelectShape } = props\n    if (onSelectShape) {\n      onSelectShape(e.id, e.srcUrl, 'change\bShape')\n    }\n    const selectId = e.id\n    for (let i = 0; i < arryList.length; i++) {\n      if (selectId === arryList[i].id) {\n        arryList[i].type = true\n      } else {\n        arryList[i].type = false\n      }\n    }\n    setArryList(arryList)\n    iconClick('box')\n  }\n  return (\n    <>\n      <div className='box'>\n        {\n          !modelType ? null : (\n            <div className='model' style={{ width: width, height: height }}>\n              <div className='boxWrap' >\n                <div className='mask' onClick={() => iconClick()} />\n                <div className='popupModel' style={{ width: width, height: '75%' }}>\n                  {/* 头部 */}\n                  <div style={{\n                    fontSize: local.current === 'ja' ? '17px' : '20px',\n                    color: '#1B1B1B',\n                    lineHeight: '56px',\n                    fontFamily: local.current === 'ja' ? 'NotoSansCJKjp-Bold' : 'initial',\n                    fontWeight: local.current === 'ja' ? 'initial' : 'bold',\n                    height: 56,\n                    boxShadow: 'inset 0 -1px 0 0 #DADADA',\n                    // marginBottom:'15px',\n                    textAlign: 'center'\n                  }}>\n                    <Locale code='make.item.shape.title' />\n                  </div>\n                  {/* 内部区域 */}\n                  <div className='content' style={{ height: (444 / 667) * height, backgroundColor: 'white' }}>\n                    <ul className='svgList'>\n                      {\n                        arryList.map((v, k) => (\n                          <li style={{ width: (window.innerWidth - 75) / 4, height: (window.innerWidth - 75) / 4, position: 'relative' }} key={k} onClick={() => selectBox(v)}>\n                            {\n                              v.type ? (\n                                <img src={v.srcUrl} alt='剪切类型图标---选中状态' width='75' height='75' style={{ position: 'absolute', left: '50%', marginLeft: -37.5, top: '50%', marginTop: -37.5 }} />\n                              ) : (\n                                <img src={v.srcUrlOff} alt='剪切类型图标---未选中状态' width='75' height='75' style={{ position: 'absolute', left: '50%', marginLeft: -37.5, top: '50%', marginTop: -37.5 }} />\n                              )\n                            }\n                          </li>\n                        ))\n                      }\n\n                    </ul>\n                    <div style={{ height: '0.75rem' }}>{/* 占位 */}</div>\n                  </div>\n                  {/* 三角形 */}\n                  <div style={{ position: 'absolute', bottom: -26, left: '50%', marginLeft: -15 }}>\n                    <svg width='30' height='24' viewBox='0 0 30 24'>\n                      <path\n                        fill='#fff'\n                        d='M30 0 L15 20 L 0 0 z'\n                      />\n                    </svg>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          )\n        }\n        <div className={modelType ? 'iconWrap activeIcon' : 'iconWrap'}>\n          <img className='icon' onClick={() => iconClick()} src={InterceptionIcon} alt='截取框图标' />\n        </div>\n\n      </div>\n    </>\n  )\n}\n\nexport default InterceptionBox\n// export default function InterceptionBoxWrapper (props) {\n//   const local = useContext(LocaleContext)\n//   return (\n//     <ItemContext.Consumer>\n//       {(item) => (\n//         <InterceptionBox local={local} {...props} item={item} />\n//       )}\n//     </ItemContext.Consumer>\n//   )\n// }\n","/**\n * 选中状态svg引入\n */\nimport svg1 from '../../assets/ShapeNew/Shape_Rectangle.svg'\nimport svg2 from '../../assets/ShapeNew/Shape_Square.svg'\nimport svg3 from '../../assets/ShapeNew/Shape_Rounded.svg'\nimport svg4 from '../../assets/ShapeNew/Shape_Circle.svg'\nimport svg5 from '../../assets/ShapeNew/Shape_Flower_1.svg'\nimport svg6 from '../../assets/ShapeNew/Shape_Flower_2.svg'\nimport svg7 from '../../assets/ShapeNew/Shape_Flower_3.svg'\nimport svg8 from '../../assets/ShapeNew/Shape_Flower_4.svg'\nimport svg9 from '../../assets/ShapeNew/Shape_Rhombus.svg'\nimport svg10 from '../../assets/ShapeNew/Shape_Hexagon.svg'\nimport svg11 from '../../assets/ShapeNew/Shape_Heart.svg'\nimport svg12 from '../../assets/ShapeNew/Shape_Star.svg'\nimport svg13 from '../../assets/ShapeNew/Shape_Triangle_1.svg'\nimport svg14 from '../../assets/ShapeNew/Shape_Triangle_2.svg'\nimport svg15 from '../../assets/ShapeNew/Shape_Triangle_3.svg'\nimport svg16 from '../../assets/ShapeNew/Shape_Triangle_4.svg'\nimport svg17 from '../../assets/ShapeNew/Shape_RightTriangle_1.svg'\nimport svg18 from '../../assets/ShapeNew/Shape_RightTriangle_2.svg'\nimport svg19 from '../../assets/ShapeNew/Shape_RightTriangle_3.svg'\nimport svg20 from '../../assets/ShapeNew/Shape_RightTriangle_4.svg'\nimport svg21 from '../../assets/ShapeNew/Shape_QuarterCircle_1.svg'\nimport svg22 from '../../assets/ShapeNew/Shape_QuarterCircle_2.svg'\nimport svg23 from '../../assets/ShapeNew/Shape_QuarterCircle_3.svg'\nimport svg24 from '../../assets/ShapeNew/Shape_QuarterCircle_4.svg'\nimport svg25 from '../../assets/ShapeNew/Shape_Parallelogram_1.svg'\nimport svg26 from '../../assets/ShapeNew/Shape_Parallelogram_2.svg'\nimport svg27 from '../../assets/ShapeNew/Shape_Parallelogram_3.svg'\nimport svg28 from '../../assets/ShapeNew/Shape_Parallelogram_4.svg'\nimport svg29 from '../../assets/ShapeNew/Shape_ZebraCrossing_1.svg'\nimport svg30 from '../../assets/ShapeNew/Shape_ZebraCrossing_2.svg'\nimport svg31 from '../../assets/ShapeNew/Shape_ZebraCrossing_3.svg'\nimport svg32 from '../../assets/ShapeNew/Shape_ZebraCrossing_4.svg'\n/**\n * 未选中状态svg引入\n */\n\nimport fill_svg1 from '../../assets/ShapeNew/Shape_Rectangle_Fill.svg'\nimport fill_svg2 from '../../assets/ShapeNew/Shape_Square_Fill.svg'\nimport fill_svg3 from '../../assets/ShapeNew/Shape_Rounded_Fill.svg'\nimport fill_svg4 from '../../assets/ShapeNew/Shape_Circle_Fill.svg'\nimport fill_svg5 from '../../assets/ShapeNew/Shape_Flower_1_Fill.svg'\nimport fill_svg6 from '../../assets/ShapeNew/Shape_Flower_2_Fill.svg'\nimport fill_svg7 from '../../assets/ShapeNew/Shape_Flower_3_Fill.svg'\nimport fill_svg8 from '../../assets/ShapeNew/Shape_Flower_4_Fill.svg'\nimport fill_svg9 from '../../assets/ShapeNew/Shape_Rhombus_Fill.svg'\nimport fill_svg10 from '../../assets/ShapeNew/Shape_Hexagon_Fill.svg'\nimport fill_svg11 from '../../assets/ShapeNew/Shape_Heart_Fill.svg'\nimport fill_svg12 from '../../assets/ShapeNew/Shape_Star_Fill.svg'\nimport fill_svg13 from '../../assets/ShapeNew/Shape_Triangle_1_Fill.svg'\nimport fill_svg14 from '../../assets/ShapeNew/Shape_Triangle_2_Fill.svg'\nimport fill_svg15 from '../../assets/ShapeNew/Shape_Triangle_3_Fill.svg'\nimport fill_svg16 from '../../assets/ShapeNew/Shape_Triangle_4_Fill.svg'\nimport fill_svg17 from '../../assets/ShapeNew/Shape_RightTriangle_1_Fill.svg'\nimport fill_svg18 from '../../assets/ShapeNew/Shape_RightTriangle_2_Fill.svg'\nimport fill_svg19 from '../../assets/ShapeNew/Shape_RightTriangle_3_Fill.svg'\nimport fill_svg20 from '../../assets/ShapeNew/Shape_RightTriangle_4_Fill.svg'\nimport fill_svg21 from '../../assets/ShapeNew/Shape_QuarterCircle_1_Fill.svg'\nimport fill_svg22 from '../../assets/ShapeNew/Shape_QuarterCircle_2_Fill.svg'\nimport fill_svg23 from '../../assets/ShapeNew/Shape_QuarterCircle_3_Fill.svg'\nimport fill_svg24 from '../../assets/ShapeNew/Shape_QuarterCircle_4_Fill.svg'\nimport fill_svg25 from '../../assets/ShapeNew/Shape_Parallelogram_1_Fill.svg'\nimport fill_svg26 from '../../assets/ShapeNew/Shape_Parallelogram_2_Fill.svg'\nimport fill_svg27 from '../../assets/ShapeNew/Shape_Parallelogram_3_Fill.svg'\nimport fill_svg28 from '../../assets/ShapeNew/Shape_Parallelogram_4_Fill.svg'\nimport fill_svg29 from '../../assets/ShapeNew/Shape_ZebraCrossing_1_Fill.svg'\nimport fill_svg30 from '../../assets/ShapeNew/Shape_ZebraCrossing_2_Fill.svg'\nimport fill_svg31 from '../../assets/ShapeNew/Shape_ZebraCrossing_3_Fill.svg'\nimport fill_svg32 from '../../assets/ShapeNew/Shape_ZebraCrossing_4_Fill.svg'\n\nexport const ArryShowList = [\n  { id: 1, srcUrl: svg1, srcUrlFill: fill_svg1 },\n  { id: 2, srcUrl: svg2, srcUrlFill: fill_svg2 },\n  { id: 3, srcUrl: svg3, srcUrlFill: fill_svg3 },\n  { id: 4, srcUrl: svg4, srcUrlFill: fill_svg4 },\n  { id: 5, srcUrl: svg5, srcUrlFill: fill_svg5 },\n  { id: 6, srcUrl: svg6, srcUrlFill: fill_svg6 },\n  { id: 7, srcUrl: svg7, srcUrlFill: fill_svg7 },\n  { id: 8, srcUrl: svg8, srcUrlFill: fill_svg8 },\n  { id: 9, srcUrl: svg9, srcUrlFill: fill_svg9 },\n  { id: 10, srcUrl: svg10, srcUrlFill: fill_svg10 },\n  { id: 11, srcUrl: svg11, srcUrlFill: fill_svg11 },\n  { id: 12, srcUrl: svg12, srcUrlFill: fill_svg12 },\n  { id: 13, srcUrl: svg13, srcUrlFill: fill_svg13 },\n  { id: 14, srcUrl: svg14, srcUrlFill: fill_svg14 },\n  { id: 15, srcUrl: svg15, srcUrlFill: fill_svg15 },\n  { id: 16, srcUrl: svg16, srcUrlFill: fill_svg16 },\n  { id: 17, srcUrl: svg17, srcUrlFill: fill_svg17 },\n  { id: 18, srcUrl: svg18, srcUrlFill: fill_svg18 },\n  { id: 19, srcUrl: svg19, srcUrlFill: fill_svg19 },\n  { id: 20, srcUrl: svg20, srcUrlFill: fill_svg20 },\n  { id: 21, srcUrl: svg21, srcUrlFill: fill_svg21 },\n  { id: 22, srcUrl: svg22, srcUrlFill: fill_svg22 },\n  { id: 23, srcUrl: svg23, srcUrlFill: fill_svg23 },\n  { id: 24, srcUrl: svg24, srcUrlFill: fill_svg24 },\n  { id: 25, srcUrl: svg25, srcUrlFill: fill_svg25 },\n  { id: 26, srcUrl: svg26, srcUrlFill: fill_svg26 },\n  { id: 27, srcUrl: svg27, srcUrlFill: fill_svg27 },\n  { id: 28, srcUrl: svg28, srcUrlFill: fill_svg28 },\n  { id: 29, srcUrl: svg29, srcUrlFill: fill_svg29 },\n  { id: 30, srcUrl: svg30, srcUrlFill: fill_svg30 },\n  { id: 31, srcUrl: svg31, srcUrlFill: fill_svg31 },\n  { id: 32, srcUrl: svg32, srcUrlFill: fill_svg32 }\n\n]\n\nexport default ArryShowList\n","/**\n * picture 页面算法\n */\n// 裁剪框形状的显示位置\nexport const shapsPositionConversion = (res) => {\n  var integrationWidth = 1024\n  var integrationHeight = 1152\n  var integrationTop = res.integrationTop\n  var integrationLeft = res.integrationLeft\n  var scaleType = ''\n  var scaleNumber = ''\n  var bigMultiples = null\n  var imgObjLeft = null\n  var imgObjTop = null\n  var imgTop = null\n  var vertical = null\n  var transverse = null\n  const shapId = res.shapId\n  const obj = res.obj\n  const size = res.size\n  const imgObj = res.imgObj\n  const canvasSize = res.canvasSize\n  const as = res.areaStyle\n  const canvasArea = res.canvasArea\n  var type = null\n  // 按照裁剪形状id来判断显示位置\n  switch (shapId) {\n    case 1:\n      integrationTop = integrationTop - ((integrationHeight - integrationWidth) / 2) - 5\n      integrationLeft = integrationLeft + 9.5\n      scaleType = 'height'\n      scaleNumber = integrationHeight + 6\n      break\n    case 6:\n      integrationLeft = integrationLeft - 19\n      integrationTop = integrationTop - 17\n      scaleType = 'width'\n      scaleNumber = integrationWidth + 49\n      break\n    case 10:\n      integrationTop = integrationTop - 58\n      integrationLeft = integrationLeft + 3\n      scaleType = 'height'\n      scaleNumber = integrationHeight + 4\n      break\n    case 11:\n      integrationLeft = integrationLeft + 5\n      integrationTop = integrationTop + 7\n      scaleType = 'width'\n      scaleNumber = integrationWidth + 8\n      break\n    case 15:\n      integrationLeft = integrationLeft - 76\n      scaleType = 'height'\n      scaleNumber = integrationHeight + 10\n      break\n    case 16:\n      integrationLeft = integrationLeft - 76\n      integrationTop = integrationTop - 1\n      scaleType = 'height'\n      scaleNumber = integrationHeight + 10\n      break\n    case 25: case 26:\n      integrationLeft = integrationLeft - 72\n      integrationTop = integrationTop - ((integrationHeight - integrationWidth) / 2)\n      scaleType = 'width'\n      scaleNumber = integrationWidth + 154\n      break\n    case 30:\n      integrationLeft = integrationLeft - 12\n      integrationTop = integrationTop - 12\n      scaleType = 'width'\n      scaleNumber = integrationWidth + 34\n      break\n    default:\n      scaleType = 'width'\n      scaleNumber = integrationWidth + 11.2\n      break\n  }\n  // 判断更新的类型（change\bShape是切换形状，itemSwitch是切换item）\n  if (size === 'change\bShape') {\n    // 判读图片是横向的还是垂直的\n    if (imgObj.width < imgObj.height) {\n      type = 'true'\n      switch (shapId) {\n        case 1:\n          bigMultiples = (integrationWidth - 3) / imgObj.width\n          transverse = (canvasSize - (imgObj.width * bigMultiples)) / 2\n          vertical = integrationTop + 63 + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = transverse - 3\n          imgObjTop = (vertical - (integrationHeight - integrationWidth) / 2) + ((integrationHeight - integrationWidth) / 2) + 4\n          integrationLeft = integrationLeft - 68\n          break\n        case 6:\n          bigMultiples = (integrationWidth - 3) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft + 19.9\n          imgObjTop = vertical - (integrationHeight - integrationWidth) / 2 + ((integrationHeight - integrationWidth) / 2)\n          break\n        case 10:\n          bigMultiples = (integrationWidth) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft - 4\n          imgObjTop = vertical - (integrationHeight - integrationWidth) / 2 + ((integrationHeight - integrationWidth) / 2) + 58\n          integrationLeft = integrationLeft - 76.5\n          break\n        case 11:\n          bigMultiples = (integrationWidth - 2) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft - 4.6\n          imgObjTop = vertical - (integrationHeight - integrationWidth) / 2 + 55\n          integrationLeft = integrationLeft - 4\n          break\n        case 14:\n          bigMultiples = (integrationWidth) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft\n          imgObjTop = vertical - (integrationHeight - integrationWidth) / 2 + ((integrationHeight - integrationWidth) / 2)\n          break\n        case 15: case 16:\n          bigMultiples = (integrationWidth) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft + 76\n          imgObjTop = vertical - (integrationHeight - integrationWidth) / 2 + ((integrationHeight - integrationWidth) / 2)\n          integrationTop = integrationTop - ((integrationHeight - integrationWidth) / 2)\n          break\n        case 17: case 18: case 19: case 20:\n          bigMultiples = (integrationWidth - 8) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft + 4\n          imgObjTop = vertical\n          break\n        case 25: case 26:\n          bigMultiples = (integrationWidth - 3) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft + 71\n          imgObjTop = vertical + ((integrationHeight - integrationWidth) / 2) + 4\n          break\n        case 30:\n          bigMultiples = (integrationWidth - 3) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft + 12\n          imgObjTop = vertical\n          break\n        default:\n          bigMultiples = (integrationWidth - 3) / imgObj.width\n          vertical = integrationTop + (integrationHeight - (imgObj.height * bigMultiples)) / 2\n          imgObjLeft = integrationLeft + 2\n          imgObjTop = vertical - 6\n          break\n      }\n      if (bigMultiples) {\n\n      }\n    } else {\n      type = 'false'\n      switch (shapId) {\n        case 10:\n          bigMultiples = (integrationHeight) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop + 64.5\n          integrationLeft = integrationLeft - 76.5\n          break\n        case 11:\n          if ((imgObj.width * ((integrationWidth * 0.865) / imgObj.height)) < integrationWidth) {\n            bigMultiples = integrationWidth / imgObj.width\n            imgObjTop = integrationTop - ((imgObj.height * bigMultiples) - integrationHeight) / 2\n          } else {\n            bigMultiples = (integrationWidth * 0.865) / imgObj.height\n            imgObjTop = integrationTop + 135\n          }\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          integrationLeft = integrationLeft - 4\n          break\n        case 12:\n          imgTop = integrationTop + 92\n          bigMultiples = (integrationWidth * 0.95) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = imgTop\n          break\n        case 13: case 14:\n          if ((imgObj.width * ((integrationWidth - 135) / imgObj.height)) < integrationWidth) {\n            bigMultiples = integrationWidth / imgObj.width\n            imgObjTop = integrationTop - ((imgObj.height * bigMultiples) - integrationHeight) / 2\n          } else {\n            bigMultiples = (integrationWidth - 135) / imgObj.height\n            imgObjTop = integrationTop + 132\n          }\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          break\n        case 15: case 16:\n          bigMultiples = (integrationHeight) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop\n          integrationTop = integrationTop - ((integrationHeight - integrationWidth) / 2)\n          break\n        case 1:\n          integrationLeft = integrationLeft - 68\n          bigMultiples = (integrationHeight + 2) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop + ((integrationHeight - integrationWidth) / 2) + 5\n          break\n        case 5:\n          bigMultiples = (integrationWidth + 1) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop + ((integrationHeight - integrationWidth) / 2)\n          break\n        case 6:\n          bigMultiples = (integrationWidth + 40) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop + ((integrationHeight - integrationWidth) / 2) + 1\n          break\n        case 25: case 26:\n          bigMultiples = (integrationWidth + 130) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop + ((integrationHeight - integrationWidth) / 2)\n          break\n        case 27: case 28:\n          if ((imgObj.width * ((integrationWidth - 112) / imgObj.height)) < integrationWidth) {\n            bigMultiples = integrationWidth / imgObj.width\n            imgObjTop = integrationTop - ((imgObj.height * bigMultiples) - integrationHeight) / 2 + 4\n          } else {\n            bigMultiples = (integrationWidth - 112) / imgObj.height\n            imgObjTop = integrationTop + ((integrationHeight - integrationWidth) / 2) + 62\n          }\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          break\n        case 29:\n          bigMultiples = (integrationWidth - 20) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop + ((integrationHeight - integrationWidth) / 2) + 10\n          break\n        case 30:\n          bigMultiples = (integrationWidth + 22) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop + ((integrationHeight - integrationWidth) / 2)\n          break\n        default:\n          bigMultiples = (integrationWidth + 6) / imgObj.height\n          transverse = (canvasArea.left - (imgObj.width * bigMultiples - integrationWidth) / 2)\n          imgObjLeft = transverse\n          imgObjTop = integrationTop + ((integrationHeight - integrationWidth) / 2) + 2\n          break\n      }\n    }\n  } else if (size === 'itemSwitch') {\n    if (imgObj.width < imgObj.height) {\n      type = 'true'\n      switch (shapId) {\n        case 1:\n          integrationLeft = integrationLeft - 68\n          break\n        case 10:\n          integrationLeft = integrationLeft - 76.5\n          break\n        case 11:\n          integrationLeft = integrationLeft - 4\n          break\n        case 15: case 16:\n          integrationTop = integrationTop - ((canvasArea.height - integrationWidth) / 2)\n          break\n      }\n    } else {\n      type = 'false'\n      switch (shapId) {\n        case 1:\n          integrationLeft = integrationLeft - 68\n          break\n        case 10:\n          integrationLeft = integrationLeft - 76.5\n          break\n        case 11:\n          integrationLeft = integrationLeft - 4\n          break\n        case 15: case 16:\n          integrationTop = integrationTop - ((canvasArea.height - integrationWidth) / 2)\n          break\n      }\n    }\n  }\n  const options = {\n    left: integrationLeft - 3,\n    top: integrationTop - 1,\n    width: integrationWidth,\n    height: integrationHeight,\n    scaleType: scaleType,\n    scaleNumber: scaleNumber,\n    bigMultiples: bigMultiples,\n    imgObjLeft: imgObjLeft,\n    imgObjTop: imgObjTop,\n    type: type\n  }\n  return options\n}\n\n// 白色框显示的位置\nexport const whiteBorderPosition = (areaStyle, shapId, imgObj) => {\n  var width = null\n  var left = null\n  var top = null\n  switch (shapId) {\n    case 1:\n      width = (areaStyle.width + 30)\n      left = (areaStyle.left - 16.5)\n      top = (areaStyle.top - 2)\n      break\n    case 6:\n      width = (areaStyle.width + 12)\n      left = (areaStyle.left - 6)\n      top = (areaStyle.top + 12)\n      break\n    case 10:\n      width = (areaStyle.width + 32)\n      left = areaStyle.left - 19\n      top = (areaStyle.top + 2)\n      break\n    case 11:\n      width = areaStyle.width + 2\n      left = areaStyle.left - 1\n      top = (areaStyle.top + 18)\n      break\n    case 14:\n      width = (areaStyle.width + 3.6)\n      left = (areaStyle.left - 1.6)\n      top = (areaStyle.top + 32.6)\n      break\n    case 15: case 16:\n      width = (areaStyle.width + 2)\n      left = (areaStyle.left - 1)\n      top = (areaStyle.top - 1.5)\n      break\n    case 25: case 26:\n      width = (areaStyle.width + 38)\n      left = (areaStyle.left - 19)\n      top = (areaStyle.top)\n      break\n    case 30:\n      width = (areaStyle.width + 8)\n      left = (areaStyle.left - 4)\n      top = (areaStyle.top + ((areaStyle.height - areaStyle.width) / 2) - 4)\n      break\n    case 32:\n      width = (areaStyle.width + 2)\n      left = (areaStyle.left - 1)\n      top = (areaStyle.top + ((areaStyle.height - areaStyle.width) / 2))\n      break\n    default:\n      width = (areaStyle.width + 3)\n      left = (areaStyle.left - 1)\n      top = (areaStyle.top + ((areaStyle.height - areaStyle.width) / 2))\n      break\n  }\n  return {\n    width: width,\n    left: left,\n    top: top\n  }\n}\nexport default {\n  shapsPositionConversion,\n  whiteBorderPosition\n}\n","import React, { useContext, useEffect, useState, useCallback, useRef } from 'react'\nimport { fabric } from '../../utils/fabric'\nimport { MakeContext } from '../MakeContext'\nimport Navbar from '../navbar'\nimport Toolbar from '../toolbar'\nimport FilterPicker from './FilterPicker'\nimport InterceptionBox from './InterceptionBox'\nimport { ItemContext } from '../../contexts/ItemContext'\nimport Enlarge from '../../components/Enlarge'\nimport TypesetPrompt from '../../components/TypesetPrompt'\nimport { ArryShowList } from './showSvg'\nimport invoke from '../../utils/invoke'\nimport IsAgainEdit from '../../components/isAgainEdit'\nimport ViewPort from '../../components/ViewPort'\nimport { throttle, InitializationThrottle } from '../../utils/throttle'\nimport instruction from '../../utils/instruction'\nimport constants from '../../constants/instruction'\nimport injectImages from '../../hoc/injectImages'\nimport fixFabricSize from '../../utils/fixFabricSize'\nimport GoToNext from '../../components/GoToNext'\nimport AlertModal from '../../components/AlertModal'\nimport { shapsPositionConversion, whiteBorderPosition } from './algorithm'\nimport imageTools from '../../utils/imageTools'\nimport { Loading } from '../../components/loading'\nvar fangzhi = 0\nvar obj = null\nvar whiteBorderUrl = null\nvar fillUrl = null\nvar itemSwitchId = null\nvar oldSvgUrl = null\nvar delay = null\nvar delayType = true\nvar shapId = null\nvar lastTop = null\nvar lastLeft = null\nfunction Picture (props) {\n  const make = useContext(MakeContext)\n  // const pictureData = JSON.parse(props.pictureData);\n  const pictureData = props.pictureData\n  const {\n    layers,\n    previousPage\n    // setLayers\n  } = make\n  const item = useContext(ItemContext)\n  const [canvas, setCanvas] = useState()\n  const [showTypeset, setShowTypeset] = useState(false)\n  const { canvasSize, imageSize, areaStyle, canvasArea } = item\n  const [svgUrls, setSvgUrls] = useState(ArryShowList)\n  const [alertModelVisible, setAlertModelVisible] = useState(false)\n  const [oldWidth, setOldWidth] = useState(areaStyle.width)\n  const [oldHeight, setOldHeight] = useState(areaStyle.height)\n  const [oldLeft, setOldLeft] = useState(areaStyle.left)\n  const [oldTop, setOldTop] = useState(areaStyle.top)\n  const [isAgainEdit, setIsAgainEdit] = useState(false)\n  const [imgObj, setImgObj] = useState(null)\n  const layer = layers ? layers[layers.length - 2] : null\n  const canvasRef = useRef()\n  function applyFilter (filter, index = 0) {\n    const e = canvas.getObjects()[0]\n    let obj = e\n    if (!obj) return\n    obj.filters[index] = filter\n    obj.applyFilters()\n    canvas.renderAll()\n  }\n  function clearFilter () {\n    const e = canvas.getObjects()[0]\n    let obj = e\n    if (!obj) return\n    obj.filters = []\n    obj.applyFilters()\n    canvas.renderAll()\n  }\n  useEffect(() => {\n    InitializationThrottle()\n    lastTop = canvasArea.top\n    lastLeft = canvasArea.left\n    if (canvas) return\n    setCanvas(new fabric.Canvas('picture_canvas', { enableRetinaScaling: false }))\n    setTimeout(() => {\n      item.setZoom(true)\n    }, 800)\n    return () => {\n    }\n  }, [])\n  useEffect(() => {\n    if (parseInt(lastTop) !== parseInt(canvasArea.top)) {\n      handleShapeChange(canvasSize, imageSize, canvasArea, itemSwitchId, oldSvgUrl, 'itemSwitch')\n    }\n  }, [canvasArea], canvasSize, imageSize)\n  function handleFilterChange (filterType) {\n    let f = fabric.Image.filters\n    if (filterType === 'original') {\n      clearFilter()\n    } else if (filterType === 'high_contrast') {\n      applyFilter(new f.Contrast({\n        contrast: 1\n      }))\n      applyFilter(new f.BlackWhite())\n    } else if (filterType === 'monochrome') {\n      applyFilter(new f.Grayscale())\n    } else if (filterType === 'fade') {\n      applyFilter(new f.ColorMatrix({\n        matrix: [\n          0.69289941361155, 0.7278445092038974, -0.05512249038767107, 0, 0,\n          0.1613074605810542, 1.0992559191682274, 0.13496294539414613, 0, 0,\n          0.3215407473339169, 0.5219370160799921, 0.475247644029788, 0, 0,\n          0, 0, 0, 1, 0\n        ]\n      }))\n    } else if (filterType === 'process') {\n      applyFilter(new f.ColorMatrix({\n        matrix: [\n          0.9923434290993866, 0.020245983284966663, 0.05808604318498348, 0, 0,\n          0.12115038437773568, 0.835385137906068, 0.05372603236979564, 0, 0,\n          0.19202559992747836, 0.21537620720368716, 0.9342355235475182, 0, 0,\n          0, 0, 0, 1, 0\n        ]\n      }))\n    } else if (filterType === 'chrome') {\n      applyFilter(new f.ColorMatrix({\n        matrix: [\n          1.6625074707000003, -0.12036142800000012, -0.012146042700000012, 0, 0,\n          -0.035792529300000035, 1.5779385719999999, -0.012146042700000012, 0, 0,\n          -0.035792529300000035, -0.12036142800000012, 1.6861539573000002, 0, 0,\n          0, 0, 0, 1, 0\n        ]\n      }))\n    }\n  }\n\n  useEffect(() => {\n    if (canvas && pictureData) {\n      document.getElementsByClassName('canvas-container')[0].onclick = function () {\n        hideTypesetFu(false)\n      }\n      fabric.Image.fromURL(pictureData.uri, function (img) {\n        setImgObj(img)\n      })\n    }\n  }, [pictureData, canvas])\n\n  function hideTypesetFu (e) {\n    setShowTypeset(e)\n  }\n  function getImageObj () {\n    return new Promise((resolve, reject) => {\n      if (pictureData && canvas) {\n        fabric.Image.fromURL(pictureData.uri, function (img) {\n          resolve(img)\n        })\n      }\n    })\n  }\n  const handleSelectShape = useCallback(\n    async (...args) => {\n      Loading({ type: true })\n      if (!showTypeset) {\n        try {\n          let visited = await instruction.checkGlobalInstruction(constants.Picture_Resize_Instruction)\n          if (!visited) {\n            setShowTypeset(true)\n            await instruction.setGlobalInstructionVisited(constants.Picture_Resize_Instruction)\n          }\n        } catch (error) {\n          setAlertModelVisible(true)\n        }\n      }\n      if (canvas) {\n        if (!imgObj) {\n          getImageObj().then((e) => {\n            handleShapeChange(canvasSize, imageSize, canvasArea, ...args, e)\n          })\n          return\n        }\n        handleShapeChange(canvasSize, imageSize, canvasArea, ...args)\n      }\n    },\n    [canvasSize, imageSize, canvasArea, canvas]\n  )\n  useEffect(() => {\n    if (canvas) {\n      function handleMouseDown (e) {\n        e.preventDefault()\n        /**\n         * 当手触摸时把图片层全部展示\n         */\n        var clipPath = new fabric.Rect({ width: canvasSize, height: canvasSize, top: 0, left: 0 })\n        canvas.clipPath = clipPath\n        canvas.renderAll()\n        var htm = document.getElementById('maskModule')\n        var screenshotsImg = document.getElementById('screenshotsImg')\n        // 判断截图层dom节点是否存在\n        if (screenshotsImg) {\n          const whiteBorder = whiteBorderPosition(areaStyle, shapId, imgObj)\n          if (whiteBorder) {\n            screenshotsImg.style.width = whiteBorder.width + 'px'\n            screenshotsImg.style.left = whiteBorder.left + 'px'\n            screenshotsImg.style.top = whiteBorder.top + 'px'\n          }\n          screenshotsImg.src = whiteBorderUrl\n        }\n        htm.style.display = 'block'\n      }\n\n      function handleMouseUp (e) {\n        canvas.clipPath = obj\n        hideTypesetFu(false)\n        canvas.renderAll()\n        const htm = document.getElementById('maskModule')\n        htm.style.display = 'none'\n      }\n\n      function handleTouchcancel (e) {\n        console.log('系统默认事件触发了')\n        canvas.clipPath = obj\n        hideTypesetFu(false)\n        canvas.renderAll()\n        const htm = document.getElementById('maskModule')\n        htm.style.display = 'none'\n      }\n      const can = canvas.upperCanvasEl\n      can.addEventListener('touchstart', handleMouseDown, false)\n      can.addEventListener('touchend', handleMouseUp, false)\n      can.addEventListener('touchcancel', handleTouchcancel, false)\n      return () => {\n        can.removeEventListener('touchstart', handleMouseDown, false)\n        can.removeEventListener('touchend', handleMouseUp, false)\n        can.removeEventListener('touchcancel', handleTouchcancel, false)\n      }\n    }\n  }, [canvas, areaStyle])\n  useEffect(() => {\n    if (canvas) {\n      return () => {\n        canvas.dispose()\n      }\n    }\n  }, [canvas])\n  async function handleShapeChange (is, cs, as, id, url, size, imageObjs) {\n    itemSwitchId = id\n    oldSvgUrl = url\n    /**\n     * 按照zoom来变换的css基础属性\n     */\n    // console.log(as)\n    var integrationWidth = as.width\n    var integrationHeight = as.height\n    var integrationTop = as.top\n    var integrationLeft = as.left\n    shapId = id\n    /**\n     * 获取每次变换截图形状后的css基础属性\n     */\n    if (canvas) {\n      canvas.setWidth(is)\n      canvas.setHeight(is)\n      fixFabricSize(canvas, cs, cs)\n      canvas.remove(canvas.getObjects().pop())\n      canvas.renderAll()\n      if (svgUrls) {\n        for (let i = 0; i < svgUrls.length; i++) {\n          if (itemSwitchId === svgUrls[i].id) {\n            fillUrl = svgUrls[i].srcUrlFill\n            whiteBorderUrl = svgUrls[i].srcUrl\n          }\n        }\n      }\n      canvas.controlsAboveOverlay = false\n      if (fillUrl) {\n        if (fangzhi === 0 || size === 'change\bShape' || size === 'itemSwitch') {\n          fangzhi++\n          fabric.loadSVGFromURL(fillUrl, (objects, options) => {\n            obj = fabric.util.groupSVGElements(objects, options)\n            const parems = {\n              integrationWidth: integrationWidth,\n              integrationHeight: integrationHeight,\n              integrationTop: integrationTop,\n              integrationLeft: integrationLeft,\n              shapId: shapId,\n              obj: obj,\n              imgObj: imgObj === null ? imageObjs : imgObj,\n              size: size,\n              canvasSize: canvasSize,\n              areaStyle: areaStyle,\n              canvasArea: canvasArea\n            }\n            const opt = shapsPositionConversion(parems)\n            if (opt) {\n              switch (opt.scaleType) {\n                case 'width':\n                  obj.scaleToWidth(opt.scaleNumber)\n                  break\n                case 'height':\n                  obj.scaleToHeight(opt.scaleNumber)\n                  break\n              }\n              if (size === 'change\bShape') {\n                if (imgObj) {\n                  imgObj.set({\n                    left: opt.type === 'true' ? canvasArea.left : opt.imgObjLeft,\n                    top: opt.imgObjTop,\n                    angle: 0,\n                    hasControls: false,\n                    hasBorders: false,\n                    hasRotatingPoint: false\n                  }).setCoords()\n                  imgObj.scale(opt.bigMultiples)\n                } else {\n                  imageObjs.set({\n                    left: opt.type === 'true' ? canvasArea.left : opt.imgObjLeft,\n                    top: opt.imgObjTop,\n                    angle: 0,\n                    hasControls: false,\n                    hasBorders: false,\n                    hasRotatingPoint: false\n                  }).setCoords()\n                  imageObjs.scale(opt.bigMultiples)\n                }\n              } else if (size === 'itemSwitch') {\n                if (imgObj) {\n                  const resItemTop = (imgObj.top - lastTop) + canvasArea.top\n                  const resItemLeft = (imgObj.left - lastLeft) + canvasArea.left\n                  imgObj.set({\n                    left: resItemLeft,\n                    top: resItemTop,\n                    hasControls: false,\n                    hasBorders: false,\n                    hasRotatingPoint: false\n                  }).setCoords()\n                  lastTop = canvasArea.top\n                  lastLeft = canvasArea.left\n                } else {\n                  const resItemTop = (imageObjs.top - lastTop) + canvasArea.top\n                  const resItemLeft = (imageObjs.left - lastLeft) + canvasArea.left\n                  imageObjs.set({\n                    left: resItemLeft,\n                    top: resItemTop,\n                    hasControls: false,\n                    hasBorders: false,\n                    hasRotatingPoint: false\n                  }).setCoords()\n                  lastTop = canvasArea.top\n                  lastLeft = canvasArea.left\n                }\n              }\n              obj.set({\n                left: opt.left - 2,\n                top: opt.top + ((canvasArea.height - opt.width) / 2),\n                fill: 'rgba(255,255,255,0)'\n              }).setCoords()\n              // 去掉fabric默认的0.01的透明度\n              if (obj._objects) {\n                if (obj._objects[0]) {\n                  obj._objects[0].set({\n                    fillOpacity: 0,\n                    fill: 'rgba(255,255,255,0)'\n                  }).setCoords()\n                }\n              }\n              canvas.clipPath = obj\n              // canvas.add(obj)\n              canvas.add(imgObj === null ? imageObjs : imgObj)\n              Loading({ type: false })\n            }\n          })\n        }\n      }\n    }\n  }\n  function change () {\n    setIsAgainEdit(true)\n  }\n\n  function isAgainFu (e) {\n    setIsAgainEdit(false)\n  }\n\n  async function toJSON () {\n    const htm = document.getElementById('picture_canvas')\n    const left = parseInt(canvasArea.left)\n    const top = parseInt(canvasArea.top)\n    const width = parseInt(canvasArea.width)\n    const height = parseInt(canvasArea.height)\n    const temporaryCanvas = document.createElement('canvas')\n    temporaryCanvas.width = width\n    temporaryCanvas.height = height\n    const ctx = temporaryCanvas.getContext('2d')\n    var imgNum = 16\n    for (let i = 0; i < imgNum; i++) {\n      if (i < 4) {\n        const imageData = htm.getContext('2d').getImageData(left + (i * (width / (imgNum / 4))), top, width / (imgNum / 4), height / (imgNum / 4))\n        ctx.putImageData(imageData, i * (width / (imgNum / 4)), 0)\n      } else if (i > 3 && i <= 7) {\n        const imageData = htm.getContext('2d').getImageData(left + ((i - 4) * (width / (imgNum / 4))), top + (height / (imgNum / 4)), width / (imgNum / 4), height / (imgNum / 4))\n        ctx.putImageData(imageData, (i - 4) * (width / (imgNum / 4)), (height / (imgNum / 4)))\n      } else if (i > 7 && i <= 11) {\n        const imageData = htm.getContext('2d').getImageData(left + ((i - 8) * (width / (imgNum / 4))), top + 2 * (height / (imgNum / 4)), width / (imgNum / 4), height / (imgNum / 4))\n        ctx.putImageData(imageData, (i - 8) * (width / (imgNum / 4)), 2 * (height / (imgNum / 4)))\n      } else if (i > 11 && i <= 15) {\n        const imageData = htm.getContext('2d').getImageData(left + ((i - 12) * (width / (imgNum / 4))), top + 3 * (height / (imgNum / 4)), width / (imgNum / 4), height / (imgNum / 4))\n        ctx.putImageData(imageData, (i - 12) * (width / (imgNum / 4)), 3 * (height / (imgNum / 4)))\n      }\n    }\n    // const imageData = htm.getContext('2d').getImageData(left, top, width, height)\n    // ctx.putImageData(imageData, 0, 0)\n    // base64  截取图片\n    const toDataurl = temporaryCanvas.toDataURL()\n    // console.log(toDataurl)\n    // return\n    try {\n      await imageTools.storeImageData({ imageName: `front-${layers.length}`, imageData: toDataurl })\n      await invoke('setLayers', layers)\n      invoke('navigateTo', {\n        to: '/mixChoice',\n        params: {\n          itemModal: 'show',\n          previousPage\n        }\n      })\n      setShowTypeset(false)\n    } catch (error) {\n      setAlertModelVisible(true)\n    }\n  }\n\n  function goPage () {\n    if (delayType) {\n      delayType = false\n      toJSON()\n      delay = setTimeout(() => {\n        delayType = true\n        window.clearTimeout(delay)\n      }, (2000))\n    }\n  }\n\n  return (\n    <div style={{\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      overflow: 'hidden'\n    }}\n    >\n      <Navbar page='picture' revoke={change}>\n        <GoToNext onClick={goPage} />\n      </Navbar>\n      <ViewPort topLayer={props.topLayer} data={props.mixData} noMultiply>\n        <div style={{ position: 'absolute', top: 0, left: 0 }}>\n          <canvas id={'picture_canvas'} ref={canvasRef} width={canvasSize} height={canvasSize} />\n        </div>\n        <div id='maskModule'\n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n            backgroundColor: 'rgba(0,0,0,0)',\n            display: 'none',\n            pointerEvents: 'none'\n          }}>\n          <img style={{ position: 'relative' }} id='screenshotsImg' src='' alt='截图层' />\n        </div>\n      </ViewPort>\n      { showTypeset ? <TypesetPrompt moveIcon='Drag.gif' resizeIcon='Resize.gif' title='make.picture.resize.title' hideTypesetProps={() => hideTypesetFu(false)} /> : ''}\n      <Toolbar>\n        <FilterPicker pictureData={pictureData} onChange={handleFilterChange} />\n        <InterceptionBox onSelectShape={handleSelectShape} />\n        <Enlarge />\n      </Toolbar>\n      <IsAgainEdit status={isAgainEdit} isAgainFu={isAgainFu} />\n      <AlertModal visible={alertModelVisible} title='error.network.title' description='error.network.description' text='OK' onClick={() => { setAlertModelVisible(false) }} />\n    </div>\n  )\n}\n\nexport default injectImages('photo')(Picture)\n","import React, { useEffect } from 'react'\nimport GotoMixIcon from '../assets/Next_Normal.svg'\nimport GotoMixIconDis from '../assets/next-disabel.svg'\nimport { throttle, InitializationThrottle } from '../utils/throttle'\nexport default function GoToNext (props) {\n  const { disabled, onClick, style } = props\n  useEffect(() => {\n    InitializationThrottle()\n  }, [])\n  return (\n    <div onClick={disabled ? null : () => throttle(onClick)}>\n      <img\n        src={disabled ? GotoMixIconDis : GotoMixIcon}\n        className='GotoMixIcon'\n        alt=''\n        style={{\n          position: 'absolute',\n          right: 12,\n          top: 2,\n          zIndex: 11,\n          width: 40,\n          height: 40,\n          transition: 'all .4s',\n          ...style\n        }} />\n    </div>\n  )\n}\n"],"sourceRoot":""}