(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1200:function(e,t,a){"use strict";var l=a(12),i=a.n(l),c=a(14),n=a(71),s=a(9),r=a(0),m=a.n(r),o=a(82),f=a(19),d=a(11),_=(a(1201),a(47)),p=a(16),g=a(20),N=a(24);t.a=function(e){var t=e.modalVisible,l=e.stamp,u=Object(r.useContext)(f.a),v=Object(r.useContext)(g.a),E=Object(r.useState)(!1),h=Object(s.a)(E,2),y=h[0],S=h[1],b=(u.recentStampArr,u.changeRecentStampArr),G=u.countryCode,O=u.layers,x=(u.setLayers,u.previousPage);function I(e){u.changeSetStampVisible(!0),u.changeTextVisible(!0),u.changeSelectedStamp(e),function(e){w.apply(this,arguments)}(e)}function w(){return(w=Object(c.a)(i.a.mark(function e(t){var a,l,c,n,s,r,m,o,f,_,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.a)("getStorageItem",{key:"recentStampObj"});case 3:return a=e.sent,"{}"===JSON.stringify(a)||"[]"===JSON.stringify(a)?l=[]:(c=JSON.parse(a),l=c[G]?c[G]:[]),n=-1,l.forEach(function(e,a){e&&e.id===t.id&&(n=a)}),Object(d.a)("log","preStamp"+JSON.stringify(t)),n>-1&&l.splice(n,1),l.unshift(t),l.length>3&&l.pop(),s={},"{}"===JSON.stringify(a)||"[]"===JSON.stringify(a)?s[G]=l:(s=JSON.parse(a))[G]=l,e.next=16,Object(d.a)("setStorageItem",{key:"recentStampObj",value:JSON.stringify(s)});case 16:if(b(l),m=[],o=[],null!=t.item_restrictions){for(_ in f=[],t.item_restrictions)f.push(_);f.forEach(function(e){o.push(t.item_restrictions[e])}),m=[].concat(f)}return r={itemId:m,colorId:o,stampFlag:{flag_layer_paint:t.flag_layer_paint,flag_layer_text:t.flag_layer_text,flag_layer_photo:t.flag_layer_photo,flag_layer_stamp:t.flag_layer_stamp,flag_can_other_layer_over:t.flag_can_other_layer_over,flag_effect_blendfunc:t.flag_effect_blendfunc,flag_effect_moma01:t.flag_effect_moma01,flag_effect_moma02:t.flag_effect_moma02,flag_effect_layout:t.flag_effect_layout,flag_effect_splash:t.flag_effect_splash,flag_effect_glitch:t.flag_effect_glitch,flag_effect_mosaic:t.flag_effect_mosaic},stampId:t.id,mixArr:[t.flag_effect_moma01,t.flag_effect_moma02,t.flag_effect_layout,t.flag_effect_splash,t.flag_effect_glitch,t.flag_effect_mosaic]},delete(p=O[O.length-1]&&"{}"!==JSON.stringify(O[O.length-1])?O:[{type:"stamp"}])[p.length-1].stampRule,p[p.length-1].stampRule=r,e.next=27,Object(d.a)("setLayers",p);case 27:Object(d.a)("navigateTo",{to:"/make/stamp/setStamp",params:{preStamp:t,previousPage:x}}),u.setModalVisible(!1),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(0),S(!0);case 34:case"end":return e.stop()}},e,this,[[0,31]])}))).apply(this,arguments)}Object(r.useEffect)(function(){Object(_.a)()},[]);var k={visible:t,transparent:!0,maskClosable:!0,footer:[{text:"OK",onPress:function(){return Object(_.b)(function(){I(u.preStamp)})}}],title:m.a.createElement("div",{className:"en"===v.current?"tzEn":"tz"},m.a.createElement(p.a,{code:"make.home.stamp.modal.title"}),m.a.createElement("div",{onClick:function(){u.setModalVisible(!1)},style:{position:"absolute",top:16,left:24,height:24,width:24}},m.a.createElement("img",{src:a(458)}))),onClose:function(){u.setModalVisible(!1)}};return m.a.createElement("div",null,m.a.createElement(o.a,Object.assign({},k,{className:"modalStyle",style:{width:"90%"},wrapClassName:"wrapmodalStyleConflict"}),function(e){var t=null;if(e){var l=e&&Object.keys(e).length>0,i="NG"==e.flag_used_with_multiple_stamps||"NG"==e.flag_used_with_same_stamps||"NG"==e.flag_rotation||"NG"==e.flag_can_over||"LOOSE_NG"==e.flag_can_over,c="NG"==e.flag_layer_stamp||"NG"==e.flag_layer_paint||"NG"==e.flag_layer_text||"NG"==e.flag_layer_photo,s="NG"==e.flag_effect_moma01||"NG"==e.flag_effect_moma02||"NG"==e.flag_effect_layout||"NG"==e.flag_effect_splash||"NG"==e.flag_effect_glitch||"NG"==e.flag_effect_mosaic,r="NG"==e.flag_can_other_layer_over||"NG"==e.flag_list,o=i||c||s||r;l&&(t=m.a.createElement("div",{style:{maxHeight:"400px",overflow:"hidden",overflowY:"scroll"}},m.a.createElement("div",{className:"stampIntroduceWrap"},m.a.createElement("div",{className:"stampIntroduceLeft"},m.a.createElement("img",{src:e.main_image_url,alt:""})),m.a.createElement("div",{className:"stampIntroduceRight",style:{position:"relative"}},"en"!==v.current?m.a.createElement("div",{className:"stampIntroduceHoldername"},e.contents_holder_name):m.a.createElement("div",{className:"stampIntroduceHoldernameEn"},e.contents_holder_name),"en"!==v.current?m.a.createElement("div",{className:"stampIntroduceName"},e.name):m.a.createElement("div",{className:"stampIntroduceNameEn"},e.name),"en"!==v.current?m.a.createElement("div",{className:"stampIntroduceCost"},m.a.createElement(p.a,{code:"make.home.stamp.modal.fee"})):m.a.createElement("div",{className:"stampIntroduceCostEn"},m.a.createElement(p.a,{code:"make.home.stamp.modal.fee"})),"en"!==v.current&&m.a.createElement("div",{style:{display:"flex",width:"100%"}},m.a.createElement("div",{className:"stampIntroducePrice"},m.a.createElement("div",{style:{fontSize:16,fontWeight:600}}),m.a.createElement("div",{style:{fontSize:17,color:"#1b1b1b",height:24,display:"flex",alignItems:"center",fontFamily:"NotoSansCJKjp-Bold"}},"0"===e.price.split("\xa5")[1]?"\u7121\u6599":"\xa5"+e.price.split("\xa5")[1])),"0"!==e.price.split("\xa5")[1]&&m.a.createElement("div",{className:"stampIntroduceConsumption"},m.a.createElement(p.a,{code:"make.home.stamp.modal.costDescription"}))),"en"===v.current&&m.a.createElement("div",{style:{display:"flex",width:"100%"}},m.a.createElement("div",{className:"stampIntroducePrice"},m.a.createElement("div",{style:Object(n.a)({fontSize:16,fontFamily:"PingFangSC",fontWeight:600},"fontFamily","PingFangSC-Semibold")}),m.a.createElement("div",{style:{fontSize:17,fontWeight:"bold",color:"#1b1b1b",height:24,display:"flex",alignItems:"center"}},"0"===e.price.split("\xa5")[1]?"Free":"\xa5"+e.price.split("\xa5")[1])),"0"!==e.price.split("\xa5")[1]&&m.a.createElement("div",{className:"stampIntroduceConsumptionEn"},m.a.createElement(p.a,{code:"make.home.stamp.modal.costDescription"}))))),m.a.createElement("div",{style:{fontSize:10,paddingTop:16,paddingBottom:16,paddingLeft:16,paddingRight:16,color:"#7d7d7d",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 -1px 0 0 #dadada"}},e.copyright),o&&m.a.createElement("div",null,"en"!==v.current?m.a.createElement("div",{className:"stampLimit"},m.a.createElement(p.a,{code:"make.home.stamp.modal.restrictions.tips"})):m.a.createElement("div",{className:"stampLimitEn"},m.a.createElement(p.a,{code:"make.home.stamp.modal.restrictions.tips"}))),m.a.createElement("div",{className:"stampLimitList"},i&&m.a.createElement("div",{className:"limitDetail"},m.a.createElement("div",{className:"limitDetailLeft"},m.a.createElement("img",{src:a(516),alt:""})),m.a.createElement("div",{style:{display:"flex",alignItems:"center",flex:1}},m.a.createElement("div",{className:"limitDetailRight"},m.a.createElement("div",null,"en"!==v.current?m.a.createElement("div",{className:"title"},"\u3067\u304d\u306a\u3044\u64cd\u4f5c"):m.a.createElement("div",{className:"titleEn"},"Action not allowed"),"NG"===e.flag_used_with_multiple_stamps&&"en"!==v.current&&m.a.createElement("div",{className:"limitfirst"},"\xb7 \u8907\u6570\u30b9\u30bf\u30f3\u30d7\u306e\u8cbc\u308a\u3064\u3051"),"NG"===e.flag_used_with_multiple_stamps&&"en"===v.current&&m.a.createElement("div",{className:"limitfirst"},"\xb7 Use multiple stickers"),"NG"===e.flag_used_with_same_stamps&&"en"!==v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 \u540c\u3058\u30b9\u30bf\u30f3\u30d7\u306e\u8cbc\u308a\u3064\u3051"),"NG"===e.flag_used_with_same_stamps&&"en"===v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 Duplicate same sticker"),"NG"===e.flag_rotation&&"en"!==v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 \u56de\u8ee2"),"NG"===e.flag_rotation&&"en"===v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 Rotate"),"INVERT_NG"===e.flag_rotation&&"en"!==v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 \u534a\u56de\u8ee2 "),"INVERT_NG"===e.flag_rotation&&"en"===v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 Reverse"),e.flag_can_over?e.flag_can_over.indexOf("NG")>-1&&"en"!==v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 \u91cd\u306d\u308b"):"en"!==v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 \u91cd\u306d\u308b"),e.flag_can_over?e.flag_can_over.indexOf("NG")>-1&&"en"===v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 Overlap"):"en"===v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 Overlap"))))),c&&m.a.createElement("div",{className:"limitDetail"},m.a.createElement("div",{className:"limitDetailLeft"},m.a.createElement("img",{src:a(527),alt:""})),m.a.createElement("div",{className:"limitDetailRight"},m.a.createElement("div",null,"en"!=v.current?m.a.createElement("div",{className:"title"},"\u4ed6\u306e\u30ec\u30a4\u30e4\u30fc\u3068\u306e\u7d44\u307f\u5408\u308f\u305b"):m.a.createElement("div",{className:"titleEn"},"Layers that can't be used"),"NG"===e.flag_layer_stamp&&m.a.createElement("div",{className:"limitfirst"},"\xb7   STAMP"),"NG"===e.flag_layer_paint&&m.a.createElement("div",{className:"limitfirst"},"\xb7  PAINT"),"NG"===e.flag_layer_text&&m.a.createElement("div",{className:"limitSecond"},"\xb7  TYPOGRAPHY"),"NG"===e.flag_layer_photo&&m.a.createElement("div",{className:"limitSecond"},"\xb7  PHOTO")))),s&&m.a.createElement("div",{className:"limitDetail"},m.a.createElement("div",{className:"limitDetailLeft"},m.a.createElement("img",{src:a(526),alt:""})),m.a.createElement("div",{className:"limitDetailRight"},m.a.createElement("div",null,"en"!=v.current?m.a.createElement("div",{className:"title"},"\u3059\u3079\u3066\u306e\u30a8\u30d5\u30a7\u30af\u30c8\u3068\u306e\u7d44\u307f\u5408\u308f\u305b"):m.a.createElement("div",{className:"titleEn"},"Effects that can't be used"),"NG"===e.flag_effect_moma01&&m.a.createElement("div",{className:"limitfirst"},"\xb7 MoMA (Early Morden Style)"),"NG"===e.flag_effect_moma02&&m.a.createElement("div",{className:"limitSecond"},"\xb7 MoMA (Collage)"),"NG"===e.flag_effect_layout&&m.a.createElement("div",{className:"limitSecond"},"\xb7 AUTO DESIGNER"),"NG"===e.flag_effect_splash&&m.a.createElement("div",{className:"limitSecond"},"\xb7 SPLASH"),"NG"===e.flag_effect_glitch&&m.a.createElement("div",{className:"limitSecond"},"\xb7 GLITCH"),"NG"===e.flag_effect_mosaic&&m.a.createElement("div",{className:"limitSecond"},"\xb7 MOSAIC")))),r&&m.a.createElement("div",{className:"limitDetail"},m.a.createElement("div",{className:"limitDetailLeft"},m.a.createElement("img",{src:a(529),alt:""})),m.a.createElement("div",{className:"limitDetailRight"},m.a.createElement("div",null,"en"!=v.current?m.a.createElement("div",{className:"title"},"\u6a5f\u80fd\u5236\u9650"):m.a.createElement("div",{className:"titleEn"},"Restricted functions"),"NG"===e.flag_can_other_layer_over&&"en"!==v.current&&m.a.createElement("div",{className:"limitfirst"},"\xb7 \u5e38\u306b\u6700\u524d\u9762"),"NG"===e.flag_can_other_layer_over&&"en"===v.current&&m.a.createElement("div",{className:"limitfirst"},"\xb7 Always in front"),"NG"===e.flag_list&&"en"!==v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 \u30de\u30fc\u30b1\u30c3\u30c8\u306b\u51fa\u54c1\u3067\u304d\u307e\u305b\u3093"),"NG"===e.flag_list&&"en"===v.current&&m.a.createElement("div",{className:"limitSecond"},"\xb7 Can't be listed on market")))))))}return t}(l)),m.a.createElement(N.a,{visible:y,title:"error.network.title",description:"error.network.description",text:"OK",onClick:function(){S(!1)}}))}},1201:function(e,t,a){},458:function(e,t,a){e.exports=a.p+"static/media/close-normal.d995f13b.svg"},516:function(e,t,a){e.exports=a.p+"static/media/Actions.16787550.svg"},526:function(e,t,a){e.exports=a.p+"static/media/Effects.393734ee.svg"},527:function(e,t,a){e.exports=a.p+"static/media/Layers.8265d1ed.svg"},529:function(e,t,a){e.exports=a.p+"static/media/RestrictedFunctions.931e960c.svg"}}]);
//# sourceMappingURL=5.1c3b4ca4.chunk.js.map